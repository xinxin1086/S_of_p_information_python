# å‰ç«¯å¼€å‘æ¥å£æ–‡æ¡£

## é¡¹ç›®æ¦‚è¿°

æœ¬æ–‡æ¡£ä¸ºå‰ç«¯å¼€å‘äººå‘˜æä¾›å®Œæ•´çš„APIæ¥å£ä½¿ç”¨æŒ‡å—ï¼ŒåŸºäºä¼˜åŒ–åçš„æ¨¡å—åŒ–æ¶æ„è®¾è®¡ã€‚é¡¹ç›®é‡‡ç”¨Flask + SQLAlchemyæŠ€æœ¯æ ˆï¼Œæä¾›RESTful APIæ¥å£ï¼Œæ”¯æŒJWTè®¤è¯å’ŒåŸºäºè§’è‰²çš„æƒé™æ§åˆ¶ã€‚

### æ ¸å¿ƒç‰¹æ€§

- âœ… **æ¨¡å—åŒ–æ¶æ„**ï¼šæ¸…æ™°çš„æ¨¡å—èŒè´£åˆ†ç¦»
- âœ… **ç»Ÿä¸€å“åº”æ ¼å¼**ï¼šæ ‡å‡†åŒ–çš„APIå“åº”ç»“æ„
- âœ… **JWTè®¤è¯**ï¼šå®‰å…¨çš„ç”¨æˆ·è®¤è¯æœºåˆ¶
- âœ… **å…¬å¼€æ¥å£**ï¼šæ— éœ€è®¤è¯å³å¯è®¿é—®çš„å…¬å¼€å†…å®¹
- âœ… **å®Œæ•´åŠŸèƒ½**ï¼šç”¨æˆ·ç®¡ç†ã€å†…å®¹å‘å¸ƒã€æ´»åŠ¨ç®¡ç†ã€è®ºå›äº¤äº’

### æŠ€æœ¯æ ˆ

- **åç«¯**: Python 3.11 + Flask 3.1.2 + SQLAlchemy 2.0.45
- **æ•°æ®åº“**: MySQL
- **è®¤è¯**: JWT Bearer Token
- **æ•°æ®æ ¼å¼**: JSON
- **éƒ¨ç½²**: æœåŠ¡å™¨éƒ¨ç½²

## ğŸ“‹ åŸºæœ¬ä¿¡æ¯

- **æœåŠ¡åœ°å€**: `http://localhost:5000`
- **è®¤è¯æ–¹å¼**: Bearer Token (JWT)
- **è¯·æ±‚æ ¼å¼**: JSON
- **å“åº”æ ¼å¼**: JSON
- **Tokenæœ‰æ•ˆæœŸ**: 3600ç§’ï¼ˆ1å°æ—¶ï¼‰

## ğŸ” è®¤è¯æœºåˆ¶

æ‰€æœ‰éœ€è¦è®¤è¯çš„æ¥å£éƒ½éœ€è¦åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦JWT Tokenï¼š

```http
Authorization: Bearer <token>
```

## ğŸ‘¥ ç®¡ç†å‘˜æƒé™åˆ†çº§

### è§’è‰²å®šä¹‰
- **SUPER_ADMINï¼ˆè¶…çº§ç®¡ç†å‘˜ï¼‰**: æ‹¥æœ‰æ‰€æœ‰æƒé™ï¼ˆæƒé™çº§åˆ«: 3ï¼‰
- **ADMINï¼ˆæ™®é€šç®¡ç†å‘˜ï¼‰**: æ‹¥æœ‰éƒ¨åˆ†æƒé™ï¼ˆæƒé™çº§åˆ«: 2ï¼‰
- **USERï¼ˆæ™®é€šç”¨æˆ·ï¼‰**: åŸºç¡€æƒé™ï¼ˆæƒé™çº§åˆ«: 1ï¼‰

### é»˜è®¤ç®¡ç†å‘˜è´¦å·
```json
{
  "account": "admin",
  "password": "123456",
  "role": "SUPER_ADMIN",
  "username": "è¶…çº§ç®¡ç†å‘˜"
}
```

---

## ğŸš€ ç®¡ç†å‘˜æ¨¡å—æ¥å£ (/api/admin)

### 1. ç®¡ç†å‘˜ç™»å½•
```http
POST /api/admin/login
```
**æ— éœ€è®¤è¯**

**è¯·æ±‚ä½“:**
```json
{
  "account": "admin",
  "password": "123456"
}
```

**å“åº”:**
```json
{
  "success": true,
  "message": "ç™»å½•æˆåŠŸ",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "user": {
      "id": 1,
      "account": "admin",
      "name": "è¶…çº§ç®¡ç†å‘˜",
      "role": "SUPER_ADMIN",
      "role_display": "è¶…çº§ç®¡ç†å‘˜",
      "user_type": "admin"
    },
    "status": "success"
  }
}
```

### 2. è·å–ç®¡ç†å‘˜ä¸ªäººä¿¡æ¯
```http
GET /api/admin/info
```
**éœ€è¦è®¤è¯**

**å“åº”:**
```json
{
  "success": true,
  "message": "ç®¡ç†å‘˜ä¿¡æ¯æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "id": 1,
    "account": "admin",
    "username": "è¶…çº§ç®¡ç†å‘˜",
    "phone": "13800138000",
    "email": "admin@example.com",
    "avatar": "æ— ",
    "role": "SUPER_ADMIN"
  }
}
```

### 3. è·å–æƒé™ä¿¡æ¯
```http
GET /api/admin/permissions
```
**éœ€è¦è®¤è¯**

**å“åº”:**
```json
{
  "success": true,
  "message": "æƒé™æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "current_role": "SUPER_ADMIN",
    "role_info": {
      "level": 3,
      "description": "è¶…çº§ç®¡ç†å‘˜ï¼Œæ‹¥æœ‰æ‰€æœ‰æƒé™",
      "permissions": ["user_management", "admin_management", "content_management", "system_operations"]
    },
    "all_roles": {
      "SUPER_ADMIN": {
        "level": 3,
        "description": "è¶…çº§ç®¡ç†å‘˜ï¼Œæ‹¥æœ‰æ‰€æœ‰æƒé™",
        "permissions": ["user_management", "admin_management", "content_management", "system_operations"]
      },
      "ADMIN": {
        "level": 2,
        "description": "æ™®é€šç®¡ç†å‘˜ï¼Œæ‹¥æœ‰éƒ¨åˆ†æƒé™",
        "permissions": ["user_view_edit", "content_management", "limited_operations"]
      }
    }
  }
}
```

### 4. è·å–ç®¡ç†å‘˜åˆ—è¡¨
```http
GET /api/admin/list
```
**éœ€è¦è®¤è¯**

**å“åº”:**
```json
{
  "success": true,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "fields": {
      "account": {"label": "ç™»å½•è´¦å·", "type": "string"},
      "username": {"label": "ç”¨æˆ·åç§°", "type": "string"},
      "phone": {"label": "ç”µè¯", "type": "string"},
      "email": {"label": "é‚®ç®±", "type": "string"},
      "avatar": {"label": "å¤´åƒ", "type": "string"},
      "role": {"label": "è§’è‰²", "type": "enum", "options": ["SUPER_ADMIN", "ADMIN"]}
    },
    "items": [
      {
        "id": 1,
        "account": "admin",
        "username": "è¶…çº§ç®¡ç†å‘˜",
        "phone": "13800138000",
        "email": "admin@example.com",
        "avatar": "æ— ",
        "role": "SUPER_ADMIN"
      }
    ]
  }
}
```

### 5. é€šç”¨æ•°æ®æ“ä½œæ¥å£
```http
POST /api/admin/operate
```
**éœ€è¦è®¤è¯** - æƒé™æ ¹æ®è¡¨åå’Œæ“ä½œç±»å‹åŠ¨æ€æ§åˆ¶

**è¯·æ±‚ä½“:**
```json
{
  "table_name": "science_articles",
  "operate_type": "add",
  "kwargs": {
    "title": "ç§‘æ™®æ–‡ç« æ ‡é¢˜",
    "content": "æ–‡ç« å†…å®¹...",
    "status": "draft",
    "cover_image": "https://example.com/image.jpg"
  }
}
```

**æ”¯æŒçš„æ“ä½œç±»å‹:**
- `add` - æ–°å¢
- `edit` - ç¼–è¾‘
- `delete` - åˆ é™¤
- `list` - åˆ—è¡¨æŸ¥è¯¢
- `detail` - è¯¦æƒ…æŸ¥è¯¢

### 6. æ´»åŠ¨è¯„åˆ†ç®¡ç†æ¥å£
```http
GET /api/admin/activity-ratings
```
**éœ€è¦è®¤è¯**

**æŸ¥è¯¢å‚æ•°:**
- `activity_id` (å¯é€‰) - æ´»åŠ¨ID
- `rater_user_id` (å¯é€‰) - è¯„åˆ†ç”¨æˆ·ID
- `score` (å¯é€‰) - è¯„åˆ†å€¼
- `page` (å¯é€‰) - é¡µç ï¼Œé»˜è®¤1
- `size` (å¯é€‰) - æ¯é¡µæ¡æ•°ï¼Œé»˜è®¤10

**å“åº”:**
```json
{
  "success": true,
  "message": "æ´»åŠ¨è¯„åˆ†åˆ—è¡¨æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "total": 100,
    "page": 1,
    "size": 10,
    "items": [
      {
        "id": 1,
        "activity_id": 1,
        "rater_user_id": 1,
        "rater_display": "å¼ ä¸‰",
        "score": 5,
        "comment_content": "æ´»åŠ¨å¾ˆæ£’ï¼",
        "create_time": "2023-01-01T00:00:00Z",
        "update_time": "2023-01-01T00:00:00Z"
      }
    ]
  }
}
```

### 7. åˆ é™¤æ´»åŠ¨è¯„åˆ†
```http
DELETE /api/admin/activity-ratings/<rating_id>
```
**éœ€è¦è®¤è¯**

---

## ğŸ”„ æ•°æ®è¿ç§»ç®¡ç†æ¥å£ï¼ˆè¶…çº§ç®¡ç†å‘˜ä¸“ç”¨ï¼‰

### 1. è·å–è¿ç§»çŠ¶æ€
```http
GET /api/admin/migration/status
```
**éœ€è¦è®¤è¯ + è¶…çº§ç®¡ç†å‘˜æƒé™**

**å“åº”:**
```json
{
  "success": true,
  "message": "è¿ç§»çŠ¶æ€æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "admin_table": {
      "total_admins": 5,
      "with_user_records": 4,
      "without_user_records": 1
    },
    "user_table": {
      "admin_role_users": 4,
      "with_admin_records": 4,
      "orphan_admin_users": 0
    },
    "migration_progress": {
      "completed": 4,
      "remaining": 1,
      "percentage": 80.0
    }
  }
}
```

### 2. éªŒè¯æ•°æ®ä¸€è‡´æ€§
```http
GET /api/admin/migration/validate-consistency
```
**éœ€è¦è®¤è¯ + è¶…çº§ç®¡ç†å‘˜æƒé™**

**å“åº”:**
```json
{
  "success": true,
  "message": "æ•°æ®ä¸€è‡´æ€§éªŒè¯å®Œæˆ",
  "data": {
    "issues_count": 5,
    "issues": [
      "ç®¡ç†å‘˜ID 1 ä¸ç”¨æˆ·ID 1 è´¦å·ä¸åŒ¹é…",
      "ç®¡ç†å‘˜ID 2 ç¼ºå°‘å…³è”ç”¨æˆ·è®°å½•"
    ]
  }
}
```

### 3. æ‰§è¡Œç®¡ç†å‘˜æ•°æ®è¿ç§»
```http
POST /api/admin/migration/migrate-admins
```
**éœ€è¦è®¤è¯ + è¶…çº§ç®¡ç†å‘˜æƒé™**

**å“åº”:**
```json
{
  "success": true,
  "message": "ç®¡ç†å‘˜æ•°æ®è¿ç§»å®Œæˆ",
  "data": {
    "migrated_count": 3,
    "error_count": 0,
    "errors": []
  }
}
```

### 4. ä¿®å¤ç®¡ç†å‘˜-ç”¨æˆ·å…³ç³»
```http
POST /api/admin/migration/repair-relationships
```
**éœ€è¦è®¤è¯ + è¶…çº§ç®¡ç†å‘˜æƒé™**

### 5. å¼ºåˆ¶åŒæ­¥ç®¡ç†å‘˜æ•°æ®
```http
POST /api/admin/migration/force-sync
```
**éœ€è¦è®¤è¯ + è¶…çº§ç®¡ç†å‘˜æƒé™**

**å“åº”:**
```json
{
  "success": true,
  "message": "å¼ºåˆ¶åŒæ­¥å®Œæˆ",
  "data": {
    "total_count": 5,
    "synced_count": 5,
    "error_count": 0,
    "errors": []
  }
}
```

---

## ğŸ‘¨â€ğŸ’¼ ç®¡ç†å‘˜é™çº§ç®¡ç†æ¥å£ï¼ˆè¶…çº§ç®¡ç†å‘˜ä¸“ç”¨ï¼‰

### 1. é™çº§å•ä¸ªç®¡ç†å‘˜
```http
POST /api/admin/demote/<admin_id>
```
**éœ€è¦è®¤è¯ + è¶…çº§ç®¡ç†å‘˜æƒé™**

**å“åº”:**
```json
{
  "success": true,
  "message": "ç®¡ç†å‘˜å·²æˆåŠŸé™çº§ä¸ºæ™®é€šç”¨æˆ·",
  "data": {
    "demoted_admin_id": 3,
    "user_id": 5,
    "user_account": "admin3"
  }
}
```

### 2. æ‰¹é‡é™çº§ç®¡ç†å‘˜
```http
POST /api/admin/demote/batch
```
**éœ€è¦è®¤è¯ + è¶…çº§ç®¡ç†å‘˜æƒé™**

**è¯·æ±‚ä½“:**
```json
{
  "admin_ids": [3, 4, 5]
}
```

---

## ğŸ“š ç§‘æ™®æ–‡ç« æ¨¡å—æ¥å£

### 1. ç§‘æ™®æ–‡ç« ç®¡ç†ï¼ˆé€šè¿‡é€šç”¨æ¥å£ï¼‰

#### åˆ›å»ºç§‘æ™®æ–‡ç« 
```http
POST /api/admin/operate
```
**è¯·æ±‚ä½“:**
```json
{
  "table_name": "science_articles",
  "operate_type": "add",
  "kwargs": {
    "title": "æ–‡ç« æ ‡é¢˜",
    "content": "æ–‡ç« å†…å®¹...",
    "status": "draft",
    "cover_image": "https://example.com/cover.jpg"
  }
}
```

**æ³¨æ„**: ç®¡ç†å‘˜åˆ›å»ºçš„æ–‡ç« ä¼šè‡ªåŠ¨æ ‡è®°ä¸ºç®¡ç†å‘˜å‘å¸ƒï¼Œæ˜¾ç¤ºä¸º"ç®¡ç†å‘˜ï¼ˆç®¡ç†å‘˜ï¼‰"

#### æŸ¥è¯¢ç§‘æ™®æ–‡ç« åˆ—è¡¨
```http
POST /api/admin/operate
```
**è¯·æ±‚ä½“:**
```json
{
  "table_name": "science_articles",
  "operate_type": "list",
  "kwargs": {
    "page": 1,
    "size": 10
  }
}
```

#### æ›´æ–°ç§‘æ™®æ–‡ç« 
```http
POST /api/admin/operate
```
**è¯·æ±‚ä½“:**
```json
{
  "table_name": "science_articles",
  "operate_type": "edit",
  "kwargs": {
    "id": 1,
    "data": {
      "title": "æ›´æ–°åçš„æ ‡é¢˜",
      "content": "æ›´æ–°åçš„å†…å®¹",
      "status": "published"
    }
  }
}
```

#### åˆ é™¤ç§‘æ™®æ–‡ç« 
```http
POST /api/admin/operate
```
**è¯·æ±‚ä½“:**
```json
{
  "table_name": "science_articles",
  "operate_type": "delete",
  "kwargs": {
    "id": 1
  }
}
```

### 2. ç§‘æ™®æ–‡ç« æ•°æ®ç»“æ„

**å®Œæ•´å­—æ®µç»“æ„:**
```json
{
  "id": 1,
  "title": "æ–‡ç« æ ‡é¢˜",
  "content": "æ–‡ç« å†…å®¹",
  "cover_image": "å°é¢å›¾ç‰‡URL",
  "status": "draft|pending|published|rejected",
  "like_count": 0,
  "view_count": 0,
  "published_at": "2023-01-01T00:00:00Z",
  "created_at": "2023-01-01T00:00:00Z",
  "updated_at": "2023-01-01T00:00:00Z",
  "author_user_id": 1,
  "author_admin_id": 1,
  "author_type": "USER|ORG_USER|ADMIN",
  "author_display": "å¼ ä¸‰ï¼ˆç”¨æˆ·ï¼‰|æå››ï¼ˆç»„ç»‡ç”¨æˆ·ï¼‰|ç‹äº”ï¼ˆç®¡ç†å‘˜ï¼‰"
}
```

**å‘å¸ƒè€…ç±»å‹è¯´æ˜:**
- `USER` - æ™®é€šç”¨æˆ·å‘å¸ƒï¼Œæ˜¾ç¤ºå¦‚ï¼š"å¼ ä¸‰ï¼ˆç”¨æˆ·ï¼‰"
- `ORG_USER` - ç»„ç»‡ç”¨æˆ·å‘å¸ƒï¼Œæ˜¾ç¤ºå¦‚ï¼š"æå››ï¼ˆç»„ç»‡ç”¨æˆ·ï¼‰"
- `ADMIN` - ç®¡ç†å‘˜å‘å¸ƒï¼Œæ˜¾ç¤ºå¦‚ï¼š"ç‹äº”ï¼ˆç®¡ç†å‘˜ï¼‰"
- ç”¨æˆ·æ³¨é”€åæ˜¾ç¤ºï¼š"ç”¨æˆ·å·²æ³¨é”€"
- ç®¡ç†å‘˜åˆ é™¤åæ˜¾ç¤ºï¼š"ç®¡ç†å‘˜å·²æ³¨é”€"

---

## ğŸ‘¤ ç”¨æˆ·æ¨¡å—æ¥å£ (/api/user)

### 1. ç”¨æˆ·ç™»å½•
```http
POST /api/user/login
```
**æ— éœ€è®¤è¯**

**è¯·æ±‚ä½“:**
```json
{
  "account": "user123",
  "password": "password123"
}
```

### 2. ç”¨æˆ·æ³¨å†Œ
```http
POST /api/user/register
```
**æ— éœ€è®¤è¯**

**è¯·æ±‚ä½“:**
```json
{
  "account": "newuser",
  "password": "password123",
  "username": "æ–°ç”¨æˆ·",
  "phone": "13800138000",
  "email": "user@example.com"
}
```

### 3. è·å–ç”¨æˆ·ä¿¡æ¯
```http
GET /api/user/info
```
**éœ€è¦è®¤è¯**

### 4. æ›´æ–°ç”¨æˆ·ä¿¡æ¯
```http
POST /api/user/update
```
**éœ€è¦è®¤è¯**

**è¯·æ±‚ä½“:**
```json
{
  "username": "æ›´æ–°åçš„ç”¨æˆ·å",
  "email": "newemail@example.com",
  "avatar": "https://example.com/avatar.jpg"
}
```

---

## ğŸ¯ æ´»åŠ¨æ¨¡å—æ¥å£ (/api/activities)

### 1. åˆ›å»ºæ´»åŠ¨
```http
POST /api/activities/
```
**éœ€è¦è®¤è¯**

**è¯·æ±‚ä½“:**
```json
{
  "title": "æ´»åŠ¨æ ‡é¢˜",
  "description": "æ´»åŠ¨æè¿°",
  "start_time": "2023-12-01T09:00:00Z",
  "end_time": "2023-12-01T18:00:00Z",
  "location": "æ´»åŠ¨åœ°ç‚¹",
  "max_participants": 50,
  "tags": ["æ•™è‚²", "ç§‘æŠ€"]
}
```

### 2. æ´»åŠ¨è¯„åˆ†
```http
POST /api/activities/<activity_id>/ratings
```
**éœ€è¦è®¤è¯**

**è¯·æ±‚ä½“:**
```json
{
  "score": 5,
  "comment_content": "æ´»åŠ¨å¾ˆæ£’ï¼"
}
```

### 3. æ´»åŠ¨è®¨è®º
```http
POST /api/activities/<activity_id>/discussions
```
**éœ€è¦è®¤è¯**

**è¯·æ±‚ä½“:**
```json
{
  "content": "è®¨è®ºå†…å®¹",
  "image_urls": ["https://example.com/image1.jpg", "https://example.com/image2.jpg"]
}
```

### 4. æ´»åŠ¨é¢„çº¦
```http
POST /api/activities/<activity_id>/booking
```
**éœ€è¦è®¤è¯**

### 5. å–æ¶ˆé¢„çº¦
```http
DELETE /api/activities/<activity_id>/booking
```
**éœ€è¦è®¤è¯**

### 6. è·å–æ´»åŠ¨é¢„çº¦åˆ—è¡¨
```http
GET /api/activities/<activity_id>/bookings
```
**éœ€è¦è®¤è¯**

### 7. è·å–æˆ‘çš„é¢„çº¦
```http
GET /api/activities/my-bookings
```
**éœ€è¦è®¤è¯**

### 8. æ´»åŠ¨è®¨è®ºå›å¤
```http
POST /api/activities/discussions/<discussion_id>/comments
```
**éœ€è¦è®¤è¯**

**è¯·æ±‚ä½“:**
```json
{
  "content": "å›å¤å†…å®¹",
  "parent_comment_id": 123
}
```

---

## ğŸ“‹ æƒé™æ§åˆ¶çŸ©é˜µ

| åŠŸèƒ½æ¨¡å— | æ¥å£ | SUPER_ADMIN | ADMIN | USER |
|---------|------|-------------|-------|------|
| **è®¤è¯ç›¸å…³** | | | | |
| ç®¡ç†å‘˜ç™»å½• | `/api/admin/login` | âœ… | âœ… | âŒ |
| ç”¨æˆ·ç™»å½• | `/api/user/login` | âœ… | âœ… | âœ… |
| ç”¨æˆ·æ³¨å†Œ | `/api/user/register` | âœ… | âœ… | âœ… |
| ä¸ªäººä¿¡æ¯ | `/api/admin/info` | âœ… | âœ… | âŒ |
| ç”¨æˆ·ä¿¡æ¯ | `/api/user/info` | âœ… | âŒ | âœ… |
| æƒé™æŸ¥è¯¢ | `/api/admin/permissions` | âœ… | âœ… | âŒ |
| **å†…å®¹ç®¡ç†** | | | | |
| ç§‘æ™®æ–‡ç« ç®¡ç† | `/api/admin/operate` (science_articles) | âœ… | âœ… | âŒ |
| æ´»åŠ¨ç®¡ç† | `/api/admin/operate` (activities) | âœ… | âœ… | âŒ |
| å…¬å‘Šç®¡ç† | `/api/admin/operate` (notice) | âœ… | âœ… | âŒ |
| ç”¨æˆ·ç®¡ç† | `/api/admin/operate` (user_info) | âœ… | âœ… | âŒ |
| æ´»åŠ¨æ“ä½œ | `/api/activities/*` | âœ… | âœ… | âœ… |
| **é«˜çº§åŠŸèƒ½** | | | | |
| ç®¡ç†å‘˜ç®¡ç† | `/api/admin/operate` (admin_info) | âœ… | âŒ | âŒ |
| æ•°æ®è¿ç§» | `/api/admin/migration/*` | âœ… | âŒ | âŒ |
| ç®¡ç†å‘˜é™çº§ | `/api/admin/demote/*` | âœ… | âŒ | âŒ |
| æ´»åŠ¨è¯„åˆ†ç®¡ç† | `/api/admin/activity-ratings` | âœ… | âœ… | âŒ |

---

## ğŸ”§ å‰ç«¯å¼€å‘æ³¨æ„äº‹é¡¹

### 1. é”™è¯¯å¤„ç†
æ‰€æœ‰æ¥å£éƒ½éµå¾ªç»Ÿä¸€çš„å“åº”æ ¼å¼ï¼š
```json
{
  "success": true/false,
  "message": "æ“ä½œç»“æœæè¿°",
  "data": {} // æˆåŠŸæ—¶è¿”å›æ•°æ®ï¼Œå¤±è´¥æ—¶ä¸ºnull
}
```

### 2. æƒé™é”™è¯¯å¤„ç†
å½“æƒé™ä¸è¶³æ—¶ï¼Œæ¥å£ä¼šè¿”å›ï¼š
```json
{
  "success": false,
  "message": "æƒé™ä¸è¶³ï¼Œéœ€è¦SUPER_ADMINæƒé™",
  "data": null
}
```
HTTPçŠ¶æ€ç ï¼š403

### 3. Tokenè¿‡æœŸå¤„ç†
å½“Tokenè¿‡æœŸæ—¶ï¼Œæ¥å£ä¼šè¿”å›ï¼š
```json
{
  "success": false,
  "message": "ä»¤ç‰Œå·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•",
  "data": null
}
```
HTTPçŠ¶æ€ç ï¼š401

### 4. CORSé…ç½®
å‰ç«¯å¼€å‘æ—¶éœ€è¦æ³¨æ„CORSé…ç½®ï¼Œå½“å‰æ”¯æŒä»¥ä¸‹æºï¼š
- `http://localhost:3000`
- `http://127.0.0.1:3000`

### 5. åˆ†é¡µæ•°æ®æ ¼å¼
```json
{
  "success": true,
  "data": {
    "items": [],
    "total": 100,
    "page": 1,
    "size": 10,
    "pages": 10
  }
}
```

### 5. å»ºè®®çš„å‰ç«¯çŠ¶æ€ç®¡ç†

**ç”¨æˆ·çŠ¶æ€:**
```typescript
interface UserState {
  isLoggedIn: boolean;
  token: string | null;
  userInfo: {
    id: number;
    account: string;
    username: string;
    role: 'SUPER_ADMIN' | 'ADMIN';
    role_display: string;
    user_type: string;
  } | null;
  permissions: {
    current_role: string;
    role_info: any;
    all_roles: any;
  } | null;
}

**æ´»åŠ¨çŠ¶æ€:**
```typescript
interface ActivityState {
  list: Activity[];
  current: Activity | null;
  loading: boolean;
  total: number;
  page: number;
  size: number;
  myBookings: Booking[];
}

**æ•°æ®è¿ç§»çŠ¶æ€:**
```typescript
interface MigrationState {
  status: {
    admin_table: {
      total_admins: number;
      with_user_records: number;
      without_user_records: number;
    };
    user_table: {
      admin_role_users: number;
      with_admin_records: number;
      orphan_admin_users: number;
    };
    migration_progress: {
      completed: number;
      remaining: number;
      percentage: number;
    };
  };
  validation: {
    issues_count: number;
    issues: string[];
  };
}
```

---

## ğŸŒ å…¬å¼€æ¥å£æ¨¡å— (/api/public)

### 1. è·å–å…¬å¼€ç§‘æ™®æ–‡ç« 
```http
GET /api/public/science/articles
```
**æ— éœ€è®¤è¯**

**æŸ¥è¯¢å‚æ•°:**
- `page` (å¯é€‰) - é¡µç ï¼Œé»˜è®¤1
- `size` (å¯é€‰) - æ¯é¡µæ¡æ•°ï¼Œé»˜è®¤10
- `keyword` (å¯é€‰) - å…³é”®è¯æœç´¢
- `author_account` (å¯é€‰) - ä½œè€…è´¦å·ç­›é€‰

**å“åº”:**
```json
{
  "success": true,
  "message": "å…¬å¼€ç§‘æ™®æ–‡ç« æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "items": [
      {
        "id": 1,
        "title": "æ–‡ç« æ ‡é¢˜",
        "content": "æ–‡ç« å†…å®¹...",
        "cover_image": "https://example.com/cover.jpg",
        "like_count": 10,
        "view_count": 100,
        "author_display": "å¼ ä¸‰ï¼ˆç”¨æˆ·ï¼‰",
        "published_at": "2023-01-01T00:00:00Z",
        "created_at": "2023-01-01T00:00:00Z"
      }
    ],
    "total": 100,
    "page": 1,
    "size": 10,
    "pages": 10
  }
}
```

### 1.1 è·å–ç§‘æ™®æ–‡ç« è¯¦æƒ…
```http
GET /api/public/science/articles/<id>
```
**æ— éœ€è®¤è¯**

**å“åº”:**
```json
{
  "success": true,
  "message": "æ–‡ç« è¯¦æƒ…æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "id": 1,
    "title": "æ–‡ç« æ ‡é¢˜",
    "content": "æ–‡ç« å†…å®¹...",
    "cover_image": "https://example.com/cover.jpg",
    "like_count": 10,
    "view_count": 100,
    "author_display": "å¼ ä¸‰ï¼ˆç”¨æˆ·ï¼‰",
    "published_at": "2023-01-01T00:00:00Z",
    "created_at": "2023-01-01T00:00:00Z"
  }
}
```

### 1.2 è·å–ç§‘æ™®æ–‡ç« ç»Ÿè®¡ä¿¡æ¯
```http
GET /api/public/science/articles/statistics
```
**æ— éœ€è®¤è¯**

**å“åº”:**
```json
{
  "success": true,
  "message": "ç§‘æ™®æ–‡ç« ç»Ÿè®¡æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "total_published": 50,
    "total_likes": 500,
    "total_views": 10000,
    "avg_likes": 10,
    "avg_views": 200,
    "recent_published_30days": 5
  }
}
```

---

### 2. è·å–å…¬å¼€æ´»åŠ¨åˆ—è¡¨
```http
GET /api/public/activities/activities
```
**æ— éœ€è®¤è¯**

**æŸ¥è¯¢å‚æ•°:**
- `page` (å¯é€‰) - é¡µç ï¼Œé»˜è®¤1
- `size` (å¯é€‰) - æ¯é¡µæ¡æ•°ï¼Œé»˜è®¤10
- `keyword` (å¯é€‰) - å…³é”®è¯æœç´¢
- `organizer_display` (å¯é€‰) - ç»„ç»‡è€…ç­›é€‰
- `status` (å¯é€‰) - æ´»åŠ¨çŠ¶æ€ç­›é€‰
- `start_date` (å¯é€‰) - å¼€å§‹æ—¥æœŸç­›é€‰
- `end_date` (å¯é€‰) - ç»“æŸæ—¥æœŸç­›é€‰

**å“åº”:**
```json
{
  "success": true,
  "message": "å…¬å¼€æ´»åŠ¨åˆ—è¡¨æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "items": [
      {
        "id": 1,
        "title": "æ´»åŠ¨æ ‡é¢˜",
        "description": "æ´»åŠ¨æè¿°",
        "start_time": "2023-12-01T09:00:00Z",
        "end_time": "2023-12-01T18:00:00Z",
        "location": "æ´»åŠ¨åœ°ç‚¹",
        "max_participants": 50,
        "current_participants": 25,
        "status": "æŠ¥åä¸­",
        "tags": ["æ•™è‚²", "ç§‘æŠ€"],
        "created_at": "2023-01-01T00:00:00Z"
      }
    ],
    "total": 50,
    "page": 1,
    "size": 10,
    "pages": 5
  }
}
```

### 2.1 è·å–å…¬å¼€æ´»åŠ¨è¯¦æƒ…
```http
GET /api/public/activities/activities/<id>
```
**æ— éœ€è®¤è¯**

**å“åº”:**
```json
{
  "success": true,
  "message": "æ´»åŠ¨è¯¦æƒ…æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "id": 1,
    "title": "æ´»åŠ¨æ ‡é¢˜",
    "description": "æ´»åŠ¨æè¿°",
    "start_time": "2023-12-01T09:00:00Z",
    "end_time": "2023-12-01T18:00:00Z",
    "location": "æ´»åŠ¨åœ°ç‚¹",
    "max_participants": 50,
    "current_participants": 25,
    "status": "æŠ¥åä¸­",
    "tags": ["æ•™è‚²", "ç§‘æŠ€"],
    "organizer_display": "ç»„ç»‡åç§°",
    "available_slots": 25,
    "activity_status": "å³å°†å¼€å§‹",
    "created_at": "2023-01-01T00:00:00Z"
  }
}
```

### 2.2 è·å–æ´»åŠ¨ç»Ÿè®¡ä¿¡æ¯
```http
GET /api/public/activities/activities/statistics
```
**æ— éœ€è®¤è¯**

**å“åº”:**
```json
{
  "success": true,
  "message": "æ´»åŠ¨ç»Ÿè®¡æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "total_activities": 50,
    "published_activities": 40,
    "ongoing_activities": 5,
    "completed_activities": 30,
    "total_participants": 1000,
    "avg_participants": 20
  }
}
```

---

### 3. è·å–å…¬å‘Šåˆ—è¡¨
```http
GET /api/public/notices
```
**æ— éœ€è®¤è¯**

**å“åº”:**
```json
{
  "success": true,
  "message": "å…¬å‘Šåˆ—è¡¨æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "items": [
      {
        "id": 1,
        "title": "å…¬å‘Šæ ‡é¢˜",
        "content": "å…¬å‘Šå†…å®¹",
        "publish_time": "2023-01-01T00:00:00Z",
        "author_display": "ç®¡ç†å‘˜",
        "priority": "high"
      }
    ],
    "total": 20,
    "page": 1,
    "size": 10,
    "pages": 2
  }
}
```

---

## ğŸ¢ ç»„ç»‡ç”¨æˆ·æ¨¡å—æ¥å£ (/api/organization)

### 1. ç»„ç»‡ç”¨æˆ·æ³¨å†Œ
```http
POST /api/organization/register
```
**æ— éœ€è®¤è¯**

**è¯·æ±‚ä½“:**
```json
{
  "account": "org_user",
  "password": "password123",
  "username": "ç»„ç»‡ç”¨æˆ·åç§°",
  "organization_name": "ç»„ç»‡åç§°",
  "phone": "13800138000",
  "email": "org@example.com",
  "organization_type": "education|research|government|company|other"
}
```

### 2. ç»„ç»‡ç”¨æˆ·ç™»å½•
```http
POST /api/organization/login
```
**æ— éœ€è®¤è¯**

### 3. è·å–ç»„ç»‡ç”¨æˆ·ä¿¡æ¯
```http
GET /api/organization/info
```
**éœ€è¦è®¤è¯**

### 4. æ›´æ–°ç»„ç»‡ä¿¡æ¯
```http
POST /api/organization/update
```
**éœ€è¦è®¤è¯**

**è¯·æ±‚ä½“:**
```json
{
  "username": "æ›´æ–°åçš„ç”¨æˆ·å",
  "organization_name": "æ›´æ–°åçš„ç»„ç»‡åç§°",
  "organization_type": "education",
  "description": "ç»„ç»‡æè¿°",
  "contact_info": "è”ç³»æ–¹å¼"
}
```

---

## ğŸ“ è®ºå›æ¨¡å—æ¥å£ (/api/forum)

### 1. åˆ›å»ºå¸–å­
```http
POST /api/forum/posts
```
**éœ€è¦è®¤è¯**

**è¯·æ±‚ä½“:**
```json
{
  "title": "å¸–å­æ ‡é¢˜",
  "content": "å¸–å­å†…å®¹",
  "category": "discussion|question|sharing|announcement",
  "tags": ["æŠ€æœ¯", "è®¨è®º"]
}
```

### 2. è·å–å¸–å­åˆ—è¡¨
```http
GET /api/forum/posts
```
**æ— éœ€è®¤è¯**

**æŸ¥è¯¢å‚æ•°:**
- `category` (å¯é€‰) - å¸–å­åˆ†ç±»
- `page` (å¯é€‰) - é¡µç ï¼Œé»˜è®¤1
- `size` (å¯é€‰) - æ¯é¡µæ¡æ•°ï¼Œé»˜è®¤10

### 3. å¸–å­è¯¦æƒ…
```http
GET /api/forum/posts/<post_id>
```
**æ— éœ€è®¤è¯**

### 4. ç‚¹èµå¸–å­
```http
POST /api/forum/posts/<post_id>/like
```
**éœ€è¦è®¤è¯**

### 5. æ·»åŠ è¯„è®º
```http
POST /api/forum/posts/<post_id>/comments
```
**éœ€è¦è®¤è¯**

**è¯·æ±‚ä½“:**
```json
{
  "content": "è¯„è®ºå†…å®¹",
  "parent_comment_id": 123
}
```

### 6. å¸–å­æœç´¢
```http
GET /api/forum/search
```
**æ— éœ€è®¤è¯**

**æŸ¥è¯¢å‚æ•°:**
- `q` - æœç´¢å…³é”®è¯
- `category` (å¯é€‰) - åˆ†ç±»ç­›é€‰
- `page` (å¯é€‰) - é¡µç 

---

## ğŸ“¢ å…¬å‘Šæ¨¡å—æ¥å£

### 1. å…¬å‘Šç®¡ç†ï¼ˆé€šè¿‡é€šç”¨æ¥å£ï¼‰
```http
POST /api/admin/operate
```
**éœ€è¦è®¤è¯**

**åˆ›å»ºå…¬å‘Š:**
```json
{
  "table_name": "notice",
  "operate_type": "add",
  "kwargs": {
    "title": "å…¬å‘Šæ ‡é¢˜",
    "content": "å…¬å‘Šå†…å®¹",
    "priority": "high|medium|low",
    "publish_time": "2023-01-01T00:00:00Z"
  }
}
```

**æŸ¥è¯¢å…¬å‘Šåˆ—è¡¨:**
```json
{
  "table_name": "notice",
  "operate_type": "list",
  "kwargs": {
    "page": 1,
    "size": 10,
    "priority": "high"
  }
}
```

### 2. å…¬å¼€å…¬å‘Šæ¥å£
```http
GET /api/public/notices
```
**æ— éœ€è®¤è¯**

---

## ğŸ“Š ç»Ÿè®¡åˆ†ææ¥å£

### 1. ç”¨æˆ·ç»Ÿè®¡ï¼ˆç®¡ç†å‘˜ï¼‰
```http
GET /api/admin/statistics/users
```
**éœ€è¦è®¤è¯**

**å“åº”:**
```json
{
  "success": true,
  "message": "ç”¨æˆ·ç»Ÿè®¡æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "total_users": 1000,
    "active_users": 800,
    "new_users_today": 10,
    "users_by_type": {
      "USER": 900,
      "ORG_USER": 80,
      "ADMIN": 20
    }
  }
}
```

### 2. å†…å®¹ç»Ÿè®¡ï¼ˆç®¡ç†å‘˜ï¼‰
```http
GET /api/admin/statistics/content
```
**éœ€è¦è®¤è¯**

**å“åº”:**
```json
{
  "success": true,
  "message": "å†…å®¹ç»Ÿè®¡æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "total_articles": 500,
    "published_articles": 400,
    "total_activities": 100,
    "active_activities": 20,
    "total_posts": 1000,
    "total_comments": 5000
  }
}
```

---

## ğŸ”§ å¼€å‘å·¥å…·å’Œè°ƒè¯•æ¥å£

### 1. ç³»ç»Ÿå¥åº·æ£€æŸ¥
```http
GET /api/health
```
**æ— éœ€è®¤è¯**

**å“åº”:**
```json
{
  "success": true,
  "message": "ç³»ç»Ÿè¿è¡Œæ­£å¸¸",
  "data": {
    "status": "healthy",
    "timestamp": "2023-01-01T00:00:00Z",
    "version": "1.0.0",
    "database": "connected"
  }
}
```

### 2. APIç‰ˆæœ¬ä¿¡æ¯
```http
GET /api/version
```
**æ— éœ€è®¤è¯**

**å“åº”:**
```json
{
  "success": true,
  "message": "APIç‰ˆæœ¬ä¿¡æ¯",
  "data": {
    "version": "1.0.0",
    "api_version": "v1",
    "build_time": "2023-01-01T00:00:00Z",
    "changelog": "https://example.com/changelog"
  }
}
```

---

## ğŸš¨ é”™è¯¯ç è¯´æ˜

| é”™è¯¯ç  | HTTPçŠ¶æ€ç  | è¯´æ˜ | è§£å†³æ–¹æ¡ˆ |
|--------|------------|------|----------|
| 400 | Bad Request | è¯·æ±‚å‚æ•°é”™è¯¯ | æ£€æŸ¥è¯·æ±‚å‚æ•°æ ¼å¼å’Œå®Œæ•´æ€§ |
| 401 | Unauthorized | æœªè®¤è¯æˆ–Tokenè¿‡æœŸ | é‡æ–°ç™»å½•è·å–æ–°Token |
| 403 | Forbidden | æƒé™ä¸è¶³ | è”ç³»ç®¡ç†å‘˜æå‡æƒé™ |
| 404 | Not Found | èµ„æºä¸å­˜åœ¨ | æ£€æŸ¥è¯·æ±‚çš„URLå’Œèµ„æºID |
| 409 | Conflict | èµ„æºå†²çª | æ£€æŸ¥æ•°æ®å”¯ä¸€æ€§çº¦æŸ |
| 422 | Unprocessable Entity | å‚æ•°éªŒè¯å¤±è´¥ | æ£€æŸ¥å‚æ•°ç±»å‹å’Œæ ¼å¼ |
| 429 | Too Many Requests | è¯·æ±‚é¢‘ç‡è¶…é™ | é™ä½è¯·æ±‚é¢‘ç‡ |
| 500 | Internal Server Error | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ | è”ç³»æŠ€æœ¯æ”¯æŒ |

---

## ğŸ“± å‰ç«¯é›†æˆç¤ºä¾‹

### React + TypeScript ç¤ºä¾‹

**APIæœåŠ¡é…ç½®:**
```typescript
// src/services/api.ts
import axios from 'axios';

const API_BASE_URL = 'http://localhost:5000';

const apiClient = axios.create({
  baseURL: API_BASE_URL,
  timeout: 10000,
  headers: {
    'Content-Type': 'application/json',
  },
});

// è¯·æ±‚æ‹¦æˆªå™¨ - æ·»åŠ è®¤è¯Token
apiClient.interceptors.request.use((config) => {
  const token = localStorage.getItem('token');
  if (token) {
    config.headers.Authorization = `Bearer ${token}`;
  }
  return config;
});

// å“åº”æ‹¦æˆªå™¨ - å¤„ç†Tokenè¿‡æœŸ
apiClient.interceptors.response.use(
  (response) => response.data,
  (error) => {
    if (error.response?.status === 401) {
      localStorage.removeItem('token');
      window.location.href = '/login';
    }
    return Promise.reject(error);
  }
);

export default apiClient;
```

**ç”¨æˆ·ç®¡ç†æœåŠ¡:**
```typescript
// src/services/userService.ts
import apiClient from './api';

export interface User {
  id: number;
  account: string;
  username: string;
  role: 'USER' | 'ORG_USER' | 'ADMIN' | 'SUPER_ADMIN';
}

export interface LoginRequest {
  account: string;
  password: string;
}

export interface LoginResponse {
  token: string;
  user: User;
}

export const userService = {
  // ç”¨æˆ·ç™»å½•
  login: async (data: LoginRequest): Promise<LoginResponse> => {
    const response = await apiClient.post('/api/user/login', data);
    return response.data;
  },

  // è·å–ç”¨æˆ·ä¿¡æ¯
  getUserInfo: async (): Promise<User> => {
    const response = await apiClient.get('/api/user/info');
    return response.data.data;
  },

  // æ›´æ–°ç”¨æˆ·ä¿¡æ¯
  updateUserInfo: async (data: Partial<User>): Promise<User> => {
    const response = await apiClient.post('/api/user/update', data);
    return response.data.data;
  },
};
```

**æ´»åŠ¨ç®¡ç†æœåŠ¡:**
```typescript
// src/services/activityService.ts
import apiClient from './api';

export interface Activity {
  id: number;
  title: string;
  description: string;
  start_time: string;
  end_time: string;
  location: string;
  max_participants: number;
  current_participants: number;
  status: string;
}

export const activityService = {
  // è·å–æ´»åŠ¨åˆ—è¡¨
  getActivities: async (page = 1, size = 10): Promise<{items: Activity[], total: number}> => {
    const response = await apiClient.get('/api/activities/', {
      params: { page, size }
    });
    return response.data.data;
  },

  // åˆ›å»ºæ´»åŠ¨
  createActivity: async (data: Partial<Activity>): Promise<Activity> => {
    const response = await apiClient.post('/api/activities/', data);
    return response.data.data;
  },

  // æ´»åŠ¨é¢„çº¦
  bookActivity: async (activityId: number): Promise<void> => {
    await apiClient.post(`/api/activities/${activityId}/booking`);
  },

  // å–æ¶ˆé¢„çº¦
  cancelBooking: async (activityId: number): Promise<void> => {
    await apiClient.delete(`/api/activities/${activityId}/booking`);
  },
};
```

### Vue 3 + TypeScript ç¤ºä¾‹

**ç»„åˆå¼APIæœåŠ¡:**
```typescript
// src/composables/useAuth.ts
import { ref, computed } from 'vue';
import { api } from '@/services/api';

interface User {
  id: number;
  account: string;
  username: string;
  role: string;
}

export function useAuth() {
  const user = ref<User | null>(null);
  const token = ref<string | null>(localStorage.getItem('token'));

  const isLoggedIn = computed(() => !!token.value);

  const login = async (account: string, password: string) => {
    try {
      const response = await api.post('/api/user/login', { account, password });
      token.value = response.data.token;
      user.value = response.data.user;
      localStorage.setItem('token', token.value);
      return response.data;
    } catch (error) {
      throw error;
    }
  };

  const logout = () => {
    token.value = null;
    user.value = null;
    localStorage.removeItem('token');
  };

  return {
    user,
    token,
    isLoggedIn,
    login,
    logout
  };
}
```

---

## ğŸ“ å¼€å‘æœ€ä½³å®è·µ

### 1. çŠ¶æ€ç®¡ç†å»ºè®®
- ä½¿ç”¨ Redux Toolkit æˆ– Zustand ç®¡ç†å…¨å±€çŠ¶æ€
- æœ¬åœ°çŠ¶æ€ä½¿ç”¨ React useState æˆ– Vue ref/reactive
- å¼‚æ­¥çŠ¶æ€ä½¿ç”¨ React Query æˆ– SWR

### 2. é”™è¯¯å¤„ç†ç­–ç•¥
- ç»Ÿä¸€é”™è¯¯å¤„ç†ä¸­é—´ä»¶
- ç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º
- é”™è¯¯æ—¥å¿—æ”¶é›†å’Œä¸ŠæŠ¥

### 3. æ€§èƒ½ä¼˜åŒ–
- APIå“åº”æ•°æ®ç¼“å­˜
- å›¾ç‰‡æ‡’åŠ è½½å’Œå‹ç¼©
- ç»„ä»¶æ‡’åŠ è½½
- è™šæ‹Ÿæ»šåŠ¨å¤„ç†å¤§åˆ—è¡¨

### 4. å®‰å…¨è€ƒè™‘
- XSSé˜²æŠ¤ï¼šè¾“å…¥éªŒè¯å’Œè¾“å‡ºç¼–ç 
- CSRFé˜²æŠ¤ï¼šä½¿ç”¨CSRF Token
- æ•æ„Ÿä¿¡æ¯åŠ å¯†å­˜å‚¨
- å®šæœŸæ›´æ–°ä¾èµ–åŒ…

### 5. æµ‹è¯•ç­–ç•¥
- å•å…ƒæµ‹è¯•è¦†ç›–æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
- é›†æˆæµ‹è¯•éªŒè¯APIäº¤äº’
- E2Eæµ‹è¯•è¦†ç›–å…³é”®ç”¨æˆ·æµç¨‹
- æ€§èƒ½æµ‹è¯•ç¡®ä¿ç”¨æˆ·ä½“éªŒ

---

## ğŸ“š æŠ€æœ¯æ ˆè¯´æ˜

### åç«¯æ¶æ„
- **Flask**: è½»é‡çº§Webæ¡†æ¶
- **SQLAlchemy**: ORMæ•°æ®åº“æ“ä½œ
- **JWT**: æ— çŠ¶æ€èº«ä»½è®¤è¯
- **Blueprint**: æ¨¡å—åŒ–è·¯ç”±ç®¡ç†

### æ•°æ®åº“è®¾è®¡
- **ç”¨æˆ·è¡¨**: ç»Ÿä¸€ç”¨æˆ·èº«ä»½ç®¡ç†
- **è§’è‰²è¡¨**: çµæ´»çš„æƒé™æ§åˆ¶
- **å†…å®¹è¡¨**: æ–‡ç« ã€æ´»åŠ¨ã€è®ºå›å†…å®¹
- **å…³è”è¡¨**: ç”¨æˆ·è¡Œä¸ºå’Œæ•°æ®å…³è”

### APIè®¾è®¡åŸåˆ™
- **RESTful**: æ ‡å‡†HTTPæ–¹æ³•ä½¿ç”¨
- **ç»Ÿä¸€å“åº”**: æ ‡å‡†åŒ–æ•°æ®æ ¼å¼
- **ç‰ˆæœ¬æ§åˆ¶**: å‘åå…¼å®¹çš„APIæ¼”è¿›
- **æ–‡æ¡£å®Œå–„**: è¯¦ç»†çš„æ¥å£è¯´æ˜

---

## ğŸ”„ ç‰ˆæœ¬æ›´æ–°æ—¥å¿—

### v1.0.0 (å½“å‰ç‰ˆæœ¬)
- âœ… å®Œæ•´çš„ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- âœ… ç®¡ç†å‘˜æƒé™åˆ†çº§ç®¡ç†
- âœ… ç§‘æ™®æ–‡ç« å‘å¸ƒç³»ç»Ÿ
- âœ… æ´»åŠ¨ç®¡ç†å’Œé¢„çº¦ç³»ç»Ÿ
- âœ… è®ºå›è®¨è®ºåŠŸèƒ½
- âœ… æ•°æ®è¿ç§»å·¥å…·
- âœ… å…¬å¼€å†…å®¹è®¿é—®æ¥å£

### è®¡åˆ’æ›´æ–° v1.1.0
- ğŸ”„ å®æ—¶é€šçŸ¥ç³»ç»Ÿ
- ğŸ”„ æ–‡ä»¶ä¸Šä¼ ä¼˜åŒ–
- ğŸ”„ æ•°æ®å¯¼å‡ºåŠŸèƒ½
- ğŸ”„ ç§»åŠ¨ç«¯é€‚é…
- ğŸ”„ å›½é™…åŒ–æ”¯æŒ

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰å¼€å‘é—®é¢˜æˆ–APIä½¿ç”¨ç–‘é—®ï¼Œè¯·è”ç³»ï¼š
- **æŠ€æœ¯æ–‡æ¡£**: æŸ¥çœ‹æœ¬æ¥å£æ–‡æ¡£
- **é”™è¯¯åé¦ˆ**: æäº¤Issueåˆ°é¡¹ç›®ä»“åº“
- **åŠŸèƒ½å»ºè®®**: è”ç³»å¼€å‘å›¢é˜Ÿ

---

æ–‡ä»¶ç»“æ„
API_user/
â”œâ”€â”€ __init__.py                 # ä¸»æ¨¡å—å…¥å£
â”œâ”€â”€ README.md                  # è¯¦ç»†ä½¿ç”¨è¯´æ˜
â”œâ”€â”€ migration_guide.py         # è¿ç§»æŒ‡å—è„šæœ¬
â”œâ”€â”€ common/                    # å…¬å…±å·¥å…·æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ utils.py              # å·¥å…·å‡½æ•°ç±»ï¼ˆéªŒè¯å™¨ã€æƒé™æ£€æŸ¥å™¨ç­‰ï¼‰
â”œâ”€â”€ user/                      # ç”¨æˆ·ç«¯æ¥å£
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ auth.py               # ç”¨æˆ·è®¤è¯ï¼ˆå¤´åƒä¸Šä¼ /åˆ é™¤ï¼‰
â”‚   â””â”€â”€ profile.py            # ä¸ªäººä¿¡æ¯ç®¡ç†
â”œâ”€â”€ admin/                     # ç®¡ç†å‘˜ç«¯æ¥å£
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ user_manage.py        # ç”¨æˆ·ç®¡ç†CRUDã€é™çº§ã€ç»Ÿè®¡
â”œâ”€â”€ auth/                      # è®¤è¯æˆæƒæ¥å£
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ token.py              # ç™»å½•ã€æ³¨å†Œã€tokenåˆ·æ–°ç­‰
â””â”€â”€ tests/                     # pytestæµ‹è¯•ç”¨ä¾‹
    â”œâ”€â”€ __init__.py
    â”œâ”€â”€ conftest.py           # æµ‹è¯•é…ç½®
    â”œâ”€â”€ test_auth.py          # è®¤è¯æ¨¡å—æµ‹è¯•
    â”œâ”€â”€ test_user_profile.py  # ç”¨æˆ·ä¸ªäººä¿¡æ¯æµ‹è¯•
    â””â”€â”€ test_admin_management.py # ç®¡ç†å‘˜ç®¡ç†æµ‹è¯•
ğŸ”§ ä¸»è¦åŠŸèƒ½æ¨¡å—
1. è®¤è¯æˆæƒæ¨¡å— (/api/user/auth/)
âœ… ç”¨æˆ·ç™»å½•/æ³¨å†Œ
âœ… JWT token ç”Ÿæˆã€åˆ·æ–°ã€éªŒè¯
âœ… å¯†ç ä¿®æ”¹
âœ… ç”¨æˆ·ç™»å‡º
2. ç”¨æˆ·ç«¯æ¥å£ (/api/user/user/)
âœ… è·å–ç”¨æˆ·ä¿¡æ¯ï¼ˆå½“å‰/æŒ‡å®šç”¨æˆ·ï¼‰
âœ… æ›´æ–°ä¸ªäººä¿¡æ¯
âœ… å¤´åƒä¸Šä¼ /åˆ é™¤
âœ… ç”¨æˆ·æ´»åŠ¨è®°å½•æŸ¥è¯¢
âœ… è´¦å·æ³¨é”€
3. ç®¡ç†å‘˜æ¥å£ (/api/user/admin/)
âœ… ç”¨æˆ·åˆ—è¡¨æŸ¥è¯¢ï¼ˆæ”¯æŒç­›é€‰ã€åˆ†é¡µï¼‰
âœ… ç”¨æˆ·CRUDæ“ä½œ
âœ… ç®¡ç†å‘˜åˆ—è¡¨æŸ¥è¯¢
âœ… ç®¡ç†å‘˜é™çº§ï¼ˆå•ä¸ª/æ‰¹é‡ï¼‰
âœ… åˆ›å»ºç®¡ç†å‘˜ï¼ˆè¶…çº§ç®¡ç†å‘˜æƒé™ï¼‰
âœ… ç”¨æˆ·ç»Ÿè®¡ä¿¡æ¯
4. å…¬å…±å·¥å…·æ¨¡å— (common/utils.py)
âœ… å‚æ•°éªŒè¯å™¨ï¼ˆé‚®ç®±ã€æ‰‹æœºå·ã€å¯†ç ç­‰ï¼‰
âœ… æƒé™æ£€æŸ¥è£…é¥°å™¨
âœ… ç”¨æˆ·æ•°æ®å¤„ç†å·¥å…·
âœ… æ•°æ®åº“æŸ¥è¯¢è¾…åŠ©å‡½æ•°
ğŸ§ª æµ‹è¯•è¦†ç›–
åˆ›å»ºäº†å®Œæ•´çš„ pytest æµ‹è¯•ç”¨ä¾‹ï¼ŒåŒ…æ‹¬ï¼š

è®¤è¯æ¨¡å—æµ‹è¯• (test_auth.py)
âœ… ç™»å½•æˆåŠŸ/å¤±è´¥åœºæ™¯
âœ… æ³¨å†ŒåŠŸèƒ½æµ‹è¯•
âœ… Tokenåˆ·æ–°å’ŒéªŒè¯
âœ… å¯†ç ä¿®æ”¹åŠŸèƒ½
âœ… æƒé™éªŒè¯æµ‹è¯•
ç”¨æˆ·ä¸ªäººä¿¡æ¯æµ‹è¯• (test_user_profile.py)
âœ… è·å–ç”¨æˆ·ä¿¡æ¯æµ‹è¯•
âœ… æ›´æ–°ä¸ªäººä¿¡æ¯æµ‹è¯•
âœ… å¤´åƒä¸Šä¼ /åˆ é™¤æµ‹è¯•
âœ… ç”¨æˆ·æ³¨é”€åŠŸèƒ½æµ‹è¯•
âœ… æƒé™è¾¹ç•Œæµ‹è¯•
ç®¡ç†å‘˜ç®¡ç†æµ‹è¯• (test_admin_management.py)
âœ… ç”¨æˆ·ç®¡ç†CRUDæµ‹è¯•
âœ… ç®¡ç†å‘˜æƒé™æµ‹è¯•
âœ… é™çº§åŠŸèƒ½æµ‹è¯•
âœ… ç»Ÿè®¡ä¿¡æ¯æµ‹è¯•
âœ… è¶…çº§ç®¡ç†å‘˜æƒé™æµ‹è¯•
---